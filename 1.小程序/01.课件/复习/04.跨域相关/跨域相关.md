#  

1. 问题一:什么是跨域

   1. 违反了浏览器的同源策略

   2. 同源的定义

      1. 如果两个 URL 的 protocol(协议名)、port (端口) (如果有指定的话)和 host(主机地址) 都相同的话，则这两个 URL 是同源

      2. ```javascript
         //例子1,由于两个网址的协议名不相同,所以不同源
         网址1:http://localhost:3000
         网址2:ftp://localhost:3000

         //例子2,虽然域名部分的地址不同,但是实际上这两个地址都指向同一个IP地址,所以同源
         网址1:http://localhost:3000
         网址2:http://127.0.0.1:3000

         //例子3,虽然两个网址的路由地址不同,但是路由地址并不在同源的判断范围之内,所以同源
         网址1:http://localhost:3000/index?username=小明
         网址2:http://localhost:3000/home?username=小红
         ```

         ​

      3. 问题:如果没有同源策略,会怎么样?

         1. 协议名不同,不会报跨域错误的情况下
            1. 可能会导致浏览器展示的html网页使用ajax技术,请求用户本地电脑中的数据,导致用户数据的泄漏,不利于用户的数据安全
            2. 浏览器对于网页读取本地文件的操作,要求非常严格,目前只能通过input[type="file"]才能读取
         2. 主机地址不同,不会报跨域错误的情况下
            1. 可能会导致假网址(后续简称B网站)使用ajax,请求真网址(后续简称A网址),并且自动携带A相关的Cookie数据,而A的服务器根据发送过来的Cookie数据,返回用户相关的信息给B网址,最终B网址使用ajax再将得到的用户信息发送会B的服务器,最终导致用户以及A网站都产生了一定程度的损失,唯独B网站从中获利

2. 问题二:跨域一定会报错吗

   1. 跨域不一定会报错
   2. 跨域是一种行为,但是该行为不一定会导致问题报错出现
   3. 服务器之间不存在跨域报错
   4. img/link/script/video/audio等标签也不会出现跨域报错
   5. **小总结:跨域问题是浏览器搞的鬼**

3. 问题三:什么情况下会出现跨域问题

   1. 只有在浏览器中在会出现跨域问题
   2. 只有在发送ajax请求的时候才有可能出现跨域问题

4. 问题四:哪些请求算是ajax请求(ajax->async javascript and xml)

   1. 简单说法:发送ajax请求
   2. 完整说法:使用ajax技术发送http请求
   3. ajax是一种发送请求的技术,不是一种特殊的请求类型
   4. **小总结:在浏览器中,如果发送的ajax请求违反了同源策略,那么就会报跨域错误**

5. 跨域问题解决方案

   1. jsonp
      1. 原理:script标签跨域请求资源是不会报跨域错误的,而且script会将请求回来的内容作为js代码自动执行
      2. 流程:
         1. 创建script标签,创建接收数据的函数
         2. 给script标签添加src属性,请求数据服务器,请求将实现准备好的接收数据的函数名称发送给服务器
         3. 服务器接收到前端传递的函数名称,再通过字符串的拼接,将函数名称与数据拼接为一个字符串
         4. 服务器将拼接好的字符串发回给前端
         5. 前端的script标签接收到服务器返回的字符串,会自动作为js代码执行
   2. CORS(跨域资源共享)
      1. 原理:
         1. 跨域问题是在服务器返回响应的过程中才会出现的,也就是说请求可以到达服务器
         2. 跨域问题是浏览器搞的鬼,如果服务器允许某个网页请求他,那么浏览器就不会再报跨域问题
      2. 流程:
         1. 服务器在响应头中配置Access-Control-Allow-Origin:"指定域名",那么指定域名就能跨域请求该服务器不会报错
   3. proxy



